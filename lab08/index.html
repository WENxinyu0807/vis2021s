<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    <title>Lab 8</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

        h1, div {
          background-color: rgba(255, 255, 0, 0.1);
          font-family: 'Noto Serif JP', serif;
          font-size: 24pt;
          border: solid 1px black;
          width: 90%;
          margin: 5px auto;
          padding: 10px;
        }

        div {
          font-size: 12pt;
        }

        body {
            background-color: rgba(255, 128, 255, 0.1);
        }

        video:hover {
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }

        .path {
          stroke-dasharray: 1000;
          stroke-dashoffset: 1000;
          animation: dash 5s linear forwards;
        }
        @keyframes dash {
          to {
            stroke-dashoffset: 0;
          }
        }
    </style>
    <script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 -->
</head>
<body>
    <h1>
        lab08 漢字書寫 (鉛筆字) (毛筆字也OK!) Path Animation
    </h1>
    <div>
      限定使用 D3.js，參考以下影片。
    	<ul>
    		<li><a href="https://bl.ocks.org/basilesimon/f164aec5758d16d51d248e41af5428e4">Animate path in D3</a></li>
    		<li><a href="https://codepen.io/MyXoToD/post/howto-self-drawing-svg-animation">"Self-Drawing" SVG</a></li>
    		<li><a href="https://stackoverflow.com/questions/15275362/how-to-transition-a-path-in-d3-js">How to transition a path in d3.js</a></li>
        <li><a href="https://css-tricks.com/svg-line-animation-works/">How SVG Line Animation Works</a></li>
        <li><a href="http://blog.roachking.net/blog/2014/10/31/osolve-team-drawing-animation/">使用 SVG 將圖片做成動畫</a></li>
        <li><a href="https://www.hesyifei.com/">何一非</a></li>
    	</ul>
    </div>

    <div>
  		<video width="400" controls loop autoplay>
  		  <source src="3.mp4" type="video/mp4">
  		</video>
    </div>

    <div>
      展示區 (姓名)
      <hr>
      <img width="256" src="./温.svg">
      <img width="256" src="./心.svg">
      <img width="256" src="./瑜.svg">
    </div>

    <div>
      Drag and Drop 展示區 (接收任何SVG)<hr>
      <svg id="svg1" height="450" width="350">
      </svg>
      <svg id="svg2" height="450" width="350">
      </svg>
      <svg id="svg3" height="450" width="350">
      </svg>
    </div>

    <script type="text/javascript">
    var line = d3.line();
    var first = [
                "M363 857q-17 -4 -29 -15.5t-25 -22.5l-9 -14l15 1v-6l-3 -1l1 -4l92 -20l3 -16l-2 -6l17 -9v-7q-16 -34 -36.5 -67t-20.5 -73l6 -22h5q2 17 4 33.5t15 26.5q17 13 35.5 26t34.5 30v5h5l14 28l10 2l10 -4v-5l37 -17v-9l-21 -22v-25l9 -22l-4 -14h-4l-34 15l-9 -9l-4 -46l1 -17q27 -2 51 -14t53 -9l14 3q44 -5 90 -12.5t93 -5.5q33 4 59.5 20.5t52.5 35.5v7l-16 13q-24 33 -44 67.5t-34 71.5l22 1q7 -7 13.5 -9.5t15.5 -2.5v-2h5l25 7v5q22 8 43 13.5t42 15.5v7l-14 4l-6 11l-7 5l-1 15l-17 4q-31 -9 -65 -15t-68 -9l-6 2l-43 -4l-15 2l-64 -4l-31 11q-50 1 -96 13.5t-93 20.5q-5 17 -21 16.5t-29 4.5v5l-19 3z",
                 "M137 830l-8 -5v-4l-9 -4q-9 -19 -24 -35.5t-14 -38.5l7 -16l12 -2q24 -68 42 -142.5t21 -152.5l-3 -19l4 -13l13 -18q1 -22 11.5 -38.5t13.5 -36.5q-22 -22 -38 -46.5t-33 -46.5v-7l7 2v-4l-5 -4h3q35 16 69.5 32t68.5 35l2 7l-3 7h-7v4l2 13l-15 22h-5l-1 11l-9 3l-12 -3l-6 2l-2 8h-5q-11 19 -23.5 33.5t-13.5 35.5q9 11 21.5 16.5t22.5 13.5l2 22q-15 51 -32.5 101.5t-26.5 104.5h5q17 -12 30 -26t21 -28l15 -14h3l-1 7q-24 55 -49 111t-47 113l-2 -3z",
                 "M689 735v-7 l-12 -32h-5v-7l13 -6q12 0 21 8t23 6q21 -31 33 -66.5t20 -70.5l-39 -8q-24 1 -49 4.5t-47 10.5v4q-16 2 -30 9t-30 9l-18 -3l-9 7l-1 18l4 32h4l36 -37l29 -16l7 3v-7l17 1l24 10l1 7l8 6v7q-11 25 -17.5 51.5t-20.5 51.5h-5l-2 16h18z",
                 "M592 707q21 -20 31 -44.5t11 -54.5h-15q-13 9 -21 21t-15 24l-8 29l2 6l-6 2l-3 16l17 5z",
                 "M522 483l-17 -41l2 -9l-2 -8l21 -5v-4l13 -5l2 -7l7 -1l5 -6l5 -7l11 -12v-7h-4l-54 12q-5 -7 -5 -17v-19q37 -17 76 -29t83 -9l3 5l-5 25h4q10 -23 17 -46t10 -48h-10q-38 8 -71.5 17.5t-68.5 20.5l-2 5h-5l-9 13l-19 10q-6 -11 -10 -23.5t-7 -25.5l6 -17l52 -30l2 -3l29 -19l20 13l18 -8l16 4l63 -9l16 3v-2h5q22 4 42 13.5t37 22.5l9 20q-8 7 -13 15t-8 17l-7 2q-14 26 -29.5 51.5t-28.5 52.5h-4l-17 35l-25 15l-8 15l-10 2l-7 -4l-6 -16l-5 -1l-17 -35l-9 -3l-30 24h21l2 16l-35 28l-7 2l-2 5l-36 12l-2 -2z",
                 "M456 424l-18 -9l1 -5h-5q-15 -29 -25 -60t-39 -54h2l29 17l1 -2l-22 -26h1q19 7 36 18t33 24v5l11 8q11 10 15 25t4 30l-14 9l-6 18z",
                 "M648 373l7 -17h-2l-7 10l-5 -1v8l5 1z"]

    var middle = ["",
                  "m 61.993784,42.290055 5.118439,11.523481 -3.048687,47.995854 -2.573205,32.221 -1.566298,14.43232 -1.118785,26.62707 L 65,202",
                  "m 85.426453,25.967862 2.383284,0.155757 5.389273,-0.650195 13.56737,-4.509271 22.70457,-5.537701 19.85662,-2.45241 14.2398,-0.39555 10.20519,1.10754 8.54388,2.847961 7.83189,5.14215 9.65142,17.008653 3.71817,7.673671 -6.48702,5.379481 -1.81953,18.986403 -0.94932,20.173053 0.7911,29.428926 1.02843,23.10012 1.18665,20.96416 1.26576,19.14462 1.66131,15.74289 0.23733,5.37948 2.92707,11.62917 -18.82818,-15.18912 -19.27761,-16.03124",
                  "m 89.569473,69.097591 50.690717,-12.352272 9.8995,-2.563262 0.7071,-3.712311 14.93763,3.800699",
                  "m 129.57812,23.5625 8.17188,7.25 2.25,23.9375 5.56349,25.683396 8.83884,34.294674 6.91017,16.83443 7.5,15.625 5.75,8.9375 L 182,166 l 11.25,9.5 -7.0625,-13.625 -0.625,-4.875 -0.3125,-9.125 0.15625,-5.71875",
                  "m 150.46904,30.980116 14.58408,5.833631 8.08754,4.728776",
                  "m 167.125,97.3125 1.9375,4.625 c 0,0 -3.625,12.625 -3.75,12.875 -0.125,0.25 -4.8125,10.6875 -4.8125,10.6875 l -7.4375,13.625 -11.1875,11.25 -9.875,5.75 c 0,0 -9.20313,2.5625 -9.26563,2.57812",
                  "m 81.879687,95.415221 -0.132582,5.966209 1.723572,5.21492 8.396893,10.47402 3.8007,3.88908 0.66291,0.66292",
                  "m 84.266173,106.11021 5.347495,-4.72878 11.976622,-5.480073 13.30244,-3.447146 5.21492,-0.883883 -7.07107,11.667262 -1.19324,4.28683 -0.30936,2.69585",
                  "m 93.54695,126.52792 2.78423,-4.90555 12.37437,-9.67853 2.82843,-1.72357 8.48528,-2.16552 8.17592,-2.07712",
                  "m 70.875,139.5625 -3.4375,8.75 13.4375,-6.375 14.75,-4.75 16.5625,-4.9375 16.875,-4.375 2.875,-0.6875 1.5625,-2.25 18.59375,2.3125",
                  "m 67,184 14.0625,-0.875 1.8125,-1.25 28.75,-5.9375 12.4375,-1.75 13.3125,-2.4375 14.375,-1.8125 10.3125,1.9375 10.3125,2.6875"
                ]

    var last = ["",
                "m 70.615385,35.230769 7.461538,5.923077 11.076923,6.692308 L 79,42.769231 75.769231,42.076923 H 74.615385 L 73.538462,42.615385 73,43.923077",
                "m 30.65864,103.93854 2.665249,0.43515 6.989478,1.35982 7.152657,-1.44141 4.649361,-1.15748 29.423077,-16.365389 11.769228,-7.615385 1.46154,-3.923077 19.30769,3.538462",
                "m 51.923077,130.69231 13.538462,16.73077 -2.076923,-4.57693 9.461538,-21.38461",
                "m 94.16227,97.4386 2.88282,1.958142 4.46021,3.861888 -7.615,16.37224 -5.928814,13.27186 -7.125461,14.14213 -3.916284,6.20078 -3.589926,4.78657",
                "m 22.200555,196.75991 2.719641,1.35982 6.418354,-1.90375 18.547955,-10.17146 28.556236,-20.72367 37.857409,-36.82394",
                "m 126.03647,39.94538 6.30956,1.087856 17.5145,-0.870285 20.4517,-5.439283 13.16306,-5.167319 4.78657,-3.589927 14.74046,2.828428",
                "m 136.28951,69.358302 8.81164,-1.468606 16.10028,-5.697649 9.92669,-4.378623 9.49155,-4.242641",
                "m 100.23077,97.346154 1.53846,-0.5 3.73077,0.730769 6.34615,-0.346154 5.5,-0.730769 8.26923,-1.5 13.88462,-3.423077 12.38462,-3.692307 3.57692,-0.615385 8.88461,-2.423077 19.42308,-3.653846 34.07692,-5.038462 4,-2.923077 18.46154,5.307693",
                "m 148.77453,10.317544 5.15048,2.62556 5.30422,4.773746 4.84298,4.296371 0.61498,11.138739 v 7.399307 l -0.53811,17.981108 -1.92182,12.650426 -3.45927,17.742421",
                "m 136.5,99.192308 -1.76923,3.923082 0.23077,1.73076 c 0,0 1.57692,1.3077 2,1.46154 0.42308,0.15385 4.38461,2.15385 4.57692,2.23077 0.19231,0.0769 4.76923,1.69231 4.76923,1.69231 l 4.03846,1.26923 c 0,0 1.57693,0.26923 1.11539,0.80769 -0.46154,0.53846 -1.23077,9.73077 -1.23077,9.73077 l -0.34615,19.03846 0.15384,9.07693 -0.30769,9.6923 -0.57692,8.3077 -0.73077,10.76923 -1.07693,9.15384 -1.34615,9.5 -3.42308,15.46154 -3.92307,11.30769 -3.76923,7.46154 -4.11539,6.07693 -3.69231,3.65384 -4.73077,4.07692",
                "m 156.61538,103.23077 1.41347,-1.02885 c 0,0 1.5673,0.0481 1.61538,0.0577 0.0481,0.01 4.375,-1.25961 4.375,-1.25961 L 170.75,98.115385 c 0,0 2.48077,-1.961539 4.88462,0.326923 2.40384,2.288462 7.23077,6.961542 7.23077,6.961542 l 4.25,2.6923 c 0,0 0.53846,0.32693 0.32692,0.53847 -0.21154,0.21153 -2,1.88461 -2,1.88461 l -4.96154,4.46154 -0.75858,6.71703 -0.19038,6.60873 -0.40794,7.34303 -0.27197,7.91416 -0.32635,8.73005 0.16318,8.51248 0.40794,8.56687 0.40795,8.26771 0.27196,6.60873 0.87029,10.52501 0.89748,7.99574 0.92468,6.25518 1.44141,7.01667 1.06066,4.18825 1.74057,6.8535 1.95814,8.24051 2.06693,6.74471 0.32635,1.71338 -9.87229,-14.90364 -5.84723,-8.45808 -6.03761,-9.70912 -0.92468,-1.32583 -3.34282,-6.77045 -1.53846,-3.38462",
                "M 150.38462,143.80769 155,142.11538 l 8.92308,-2.57692 11,-2.96154 3.88461,-0.84615",
                "m 149.80613,165.53842 2.33889,1.08786 6.03761,1.03346 9.24678,-1.74057 8.15892,-2.88282 3.046,-1.19664"
              ]


const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
async function first_N(){
    for (var i = 0; i < first.length; i++) {
      d3.select("#svg1")
      .append('path')
      .attr('class', 'path')
      .attr('fill', "none")
      .attr('stroke', "black")
      .attr('stroke-width', "6.103")
      .attr('d', first[i]);
      console.log(i);
      await sleep(500);
    }
}
first_N()

async function middle_N(){
    for (var j = 0; j < middle.length; j++) {
        d3.select("#svg2")
        .append('path')
        .attr('class', 'path')
        .attr('fill', "none")
        .attr('stroke', "black")
        .attr('stroke-width', "6.103")
        .attr('d', middle[j]);
        console.log(j);
        await sleep(500);
    }
}
middle_N()

async function last_N(){
    for (var k = 0; k < last.length; k++) {
      d3.select("#svg3")
      .append('path')
      .attr('class', 'path')
      .attr('fill', "none")
      .attr('stroke', "black")
      .attr('stroke-width', "6.103")
      .attr('d', last[k]);
      console.log(k);
      await sleep(500);
    }
}
last_N()

    </script>
  </html>
